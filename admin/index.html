<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Cendekia Aksara</title>
    
    <!-- Link CSS (Sesuaikan path jika perlu) -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f4f6f9; margin: 0; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }

        /* --- HEADER --- */
        .brand-header {
            background: linear-gradient(135deg, #001f3f 0%, #003366 100%);
            color: white; padding: 25px; border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 31, 63, 0.3);
            display: flex; align-items: center; gap: 20px; margin-bottom: 30px;
            position: relative; overflow: hidden;
        }
        
        .brand-header::after {
            content: ''; position: absolute; top: -50%; right: -10%;
            width: 300px; height: 300px; background: rgba(255, 255, 255, 0.05);
            border-radius: 50%; pointer-events: none;
        }

        .header-logo-circle {
            width: 70px; height: 70px; background: white; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            color: #003366; font-size: 2rem; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            flex-shrink: 0;
        }
        .header-logo-circle img { width: 70%; height: auto; }

        .header-info { display: flex; flex-direction: column; justify-content: center; }
        .header-brand-name {
            font-family: 'Playfair Display', serif; font-size: 1.8rem; font-weight: 700;
            margin: 0; line-height: 1.1; letter-spacing: 0.5px;
        }
        .header-greeting {
            font-size: 1rem; opacity: 0.9; margin-top: 5px; font-weight: 400;
        }

        /* --- GRID MENU --- */
        .dashboard-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-top: 20px;
        }

        .dashboard-card {
            padding: 25px; border-radius: 15px; color: white; text-align: center; text-decoration: none;
            transition: all 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            min-height: 140px; position: relative; overflow: hidden;
        }

        .dashboard-card:hover { transform: translateY(-5px); filter: brightness(1.1); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .dashboard-card i { font-size: 2.5rem; margin-bottom: 15px; }
        .dashboard-card h3 { font-size: 1.1rem; font-weight: 600; margin: 0; }

        /* Warna Menu */
        .card-tugas { background: linear-gradient(135deg, #005a9c, #007bff); }
        .card-nilai { background: linear-gradient(135deg, #6f42c1, #e83e8c); }
        .card-siswa { background: linear-gradient(135deg, #17a2b8, #20c997); }
        
        /* MENU BARU */
        .card-rapor { background: linear-gradient(135deg, #d63384, #fd7e14); } /* Pink-Orange */
        .card-biodata { background: linear-gradient(135deg, #11998e, #38ef7d); } /* Tosca-Green */
        
        .card-arsip { background: linear-gradient(135deg, #343a40, #6c757d); }
        .card-pustaka { background: linear-gradient(135deg, #fd7e14, #d63384); }
        .card-kuis { background: linear-gradient(135deg, #28a745, #17a2b8); }
        .card-ujian { background: linear-gradient(135deg, #f7a04a, #ffc107); }

        #logout-btn {
            background-color: white; color: #dc3545; border: 1px solid #dc3545;
            padding: 10px 30px; border-radius: 50px; font-weight: 600;
            cursor: pointer; margin-top: 40px; transition: all 0.2s;
        }
        #logout-btn:hover { background-color: #dc3545; color: white; }

        @media (max-width: 480px) {
            .brand-header { padding: 20px; gap: 15px; }
            .header-brand-name { font-size: 1.4rem; }
            .dashboard-card { padding: 20px; min-height: 120px; }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div class="brand-header">
            <div class="header-logo-circle">
                <!-- Ganti src logo sesuai kebutuhan -->
                <i class="fa-solid fa-graduation-cap"></i>
            </div>
            <div class="header-info">
                <h1 class="header-brand-name">Portal Admin</h1>
                <div id="admin-greeting" class="header-greeting"><i class="fa-solid fa-spinner fa-spin"></i> Memuat...</div>
            </div>
        </div>

        <div class="dashboard-grid">
            
            <a href="nilai.html" class="dashboard-card card-siswa">
                <i class="fa-solid fa-users-gear"></i> <h3>Input Nilai Siswa</h3>
            </a>
            
            <a href="siswa.html" class="dashboard-card card-siswa">
                <i class="fa-solid fa-users-gear"></i> <h3>Data Siswa</h3>
            </a>

            <a href="arsip.html" class="dashboard-card card-siswa">
                <i class="fa-solid fa-users-gear"></i> <h3>Log Kegiatan</h3>
            </a>

            <!-- FITUR BARU: E-RAPOR -->
            <a href="e_rapor.html" class="dashboard-card card-rapor">
                <i class="fa-solid fa-file-pdf"></i> <h3>E-Rapor Siswa</h3>
            </a>

            <!-- FITUR BARU: BIODATA -->
            <a href="biodata_siswa.html" class="dashboard-card card-biodata">
                <i class="fa-solid fa-id-card-clip"></i> <h3>Biodata & Kontrol</h3>
            </a>
            
            <a href="tugas.html" class="dashboard-card card-tugas">
                <i class="fa-solid fa-pen-to-square"></i> <h3>Kelola Tugas</h3>
            </a>
            
            <!-- Link Eksternal -->
            <a href="#" class="dashboard-card card-arsip">
                <i class="fa-solid fa-clock-rotate-left"></i> <h3>Log Aktivitas</h3>
            </a>

            <a href="https://bhe-24.github.io/PustakaMateri/" target="_blank" class="dashboard-card card-pustaka">
                <i class="fa-solid fa-book-atlas"></i> <h3>Pustaka Materi</h3>
            </a>

            <a href="https://bhe-24.github.io/PortalKuis/" target="_blank" class="dashboard-card card-kuis">
                <i class="fa-solid fa-list-check"></i> <h3>Kelola Kuis</h3>
            </a>

            <a href="https://bhe-24.github.io/PortalUjian/" target="_blank" class="dashboard-card card-ujian">
                <i class="fa-solid fa-file-signature"></i> <h3>Kelola Ujian</h3>
            </a>

        </div>

        <div style="text-align:center;">
            <button id="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Keluar</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Konfigurasi Firebase (Sesuaikan)
        const firebaseConfig = { 
            apiKey: "AIzaSyDpUWUIzPXIZN6rrNtsIqcL6VfOE2RLVl0", 
            authDomain: "mading-cf676.firebaseapp.com", 
            projectId: "mading-cf676", 
            storageBucket: "mading-cf676.firebasestorage.app", 
            messagingSenderId: "72175203671", 
            appId: "1:72175203671:web:7a0676a55beb64bc96ba12" 
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                // Ambil nama user jika ada di DB
                try {
                    const docSnap = await getDoc(doc(db, "users", user.uid));
                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        document.getElementById('admin-greeting').innerText = "Selamat Datang, " + (data.name || "Admin");
                    } else {
                        document.getElementById('admin-greeting').innerText = "Mode Tamu / Admin";
                    }
                } catch(e) {
                    document.getElementById('admin-greeting').innerText = "Admin Panel";
                }
            } else {
                // Auto login anonim jika belum login (untuk demo)
                signInAnonymously(auth).catch(console.error);
            }
        });

        document.getElementById('logout-btn').onclick = async () => {
            if(confirm("Yakin ingin keluar?")) { 
                await signOut(auth); 
                window.location.reload(); 
            }
        };
    </script>
</body>
</html>
