<!DOCTYPE html>
<html lang="id">
<head>
    <title>Dashboard - Cendekia Aksara</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fa-solid fa-graduation-cap"></i> Dashboard Siswa</h1>
            <p id="user-greeting">Memuat data...</p>
        </div>

        <div class="dashboard-grid">
            <a href="/tugas" class="dashboard-card tugas"> 
                <i class="fa-solid fa-pencil-alt"></i> <h3>Tugas Harian</h3> 
            </a>
            <a href="/profil" class="dashboard-card profil"> 
                <i class="fa-solid fa-user"></i> <h3>Profil Saya</h3> 
            </a>
            <a href="/kartu-studi" class="dashboard-card kartu-studi"> 
                <i class="fa-solid fa-file-contract"></i> <h3>Kartu Studi</h3> 
            </a>
            <a href="https://bhe-24.github.io/PustakaMateri/" target="_blank" class="dashboard-card pustaka"> 
                <i class="fa-solid fa-book-atlas"></i> <h3>Pustaka Materi</h3> 
            </a>
             <a href="https://bhe-24.github.io/PortalKuis/" target="_blank" class="dashboard-card kuis"> 
                <i class="fa-solid fa-list-check"></i> <h3>Portal Kuis</h3> 
            </a>
            <a href="https://bhe-24.github.io/PortalUjian/" target="_blank" class="dashboard-card ujian"> 
                <i class="fa-solid fa-stopwatch"></i> <h3>Portal Ujian</h3> 
            </a>
        </div>
        
        <button id="logout-btn" class="btn btn-danger" style="margin-top:30px;">Keluar (Logout)</button>
    </div>

    <script type="module">
        import { auth, checkAuth } from "/js/firebase-config.js";
        import { signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        (async () => {
            const userData = await checkAuth('siswa');
            if(userData) {
                document.getElementById('user-greeting').innerText = `Halo, ${userData.name}!`;
            }
        })();

        document.getElementById('logout-btn').onclick = async () => {
            if(confirm('Yakin ingin keluar?')) {
                await signOut(auth);
                window.location.href = '/';
            }
        };
    </script>
</body>
</html>
